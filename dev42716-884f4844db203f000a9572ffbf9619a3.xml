<?xml version="1.0" encoding="UTF-8"?><unload unload_date="2019-03-28 09:00:24"><sys_remote_update_set action="INSERT_OR_UPDATE"><application display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</application><application_name>Walk-up Experience</application_name><application_scope>sn_walkup</application_scope><application_version>1.1.11.1</application_version><collisions/><commit_date/><deleted/><description/><inserted/><name>20190322-dev25830-WALK-UP-mandle-gdpr-walk-up-experience</name><origin_sys_id/><parent/><release_date/><remote_base_update_set/><remote_parent_id/><remote_sys_id>884f4844db203f000a9572ffbf9619a3</remote_sys_id><state>loaded</state><summary/><sys_class_name>sys_remote_update_set</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2019-03-28 09:00:24</sys_created_on><sys_id>0cf9ac10dbec3f000a9572ffbf9619e1</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>admin</sys_updated_by><sys_updated_on>2019-03-28 09:00:24</sys_updated_on><update_set/><update_source/><updated/></sys_remote_update_set><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</application><category>customer</category><comments/><name>m2m_sp_ng_pro_sp_widget_a6b1453adb1c3700314952b0cf9619cb</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_ng_pro_sp_widget"><m2m_sp_ng_pro_sp_widget action="INSERT_OR_UPDATE"><sp_angular_provider display_value="spAttachmentManager">06e836f0d722120023c84f80de6103a1</sp_angular_provider><sp_widget display_value="KB Article Modal">7290c576db1c3700314952b0cf961900</sp_widget><sys_class_name>m2m_sp_ng_pro_sp_widget</sys_class_name><sys_created_by>jeremy.mandle</sys_created_by><sys_created_on>2019-03-23 18:53:28</sys_created_on><sys_id>a6b1453adb1c3700314952b0cf9619cb</sys_id><sys_mod_count>0</sys_mod_count><sys_name>spAttachmentManager.KB Article Modal</sys_name><sys_package display_value="Walk-up Experience" source="sn_walkup">1da803b9b3b10300f686a72256a8dcbc</sys_package><sys_policy/><sys_scope display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</sys_scope><sys_update_name>m2m_sp_ng_pro_sp_widget_a6b1453adb1c3700314952b0cf9619cb</sys_update_name><sys_updated_by>jeremy.mandle</sys_updated_by><sys_updated_on>2019-03-23 18:53:28</sys_updated_on></m2m_sp_ng_pro_sp_widget></record_update>]]></payload><payload_hash>-1638381931</payload_hash><remote_update_set display_value="20190322-dev25830-WALK-UP-mandle-gdpr-walk-up-experience">0cf9ac10dbec3f000a9572ffbf9619e1</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2019-03-28 09:00:24</sys_created_on><sys_id>00f9ac10dbec3f000a9572ffbf9619e2</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>169bf1ca7b30000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2019-03-28 09:00:24</sys_updated_on><table/><target_name>spAttachmentManager.KB Article Modal</target_name><type>Angular Providers</type><update_domain>global</update_domain><update_guid>a2b1453a991c3700df6652c83c289acd</update_guid><update_guid_history>a2b1453a991c3700df6652c83c289acd:-1638381931</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</application><category>customer</category><comments/><name>sp_widget_7290c576db1c3700314952b0cf961900</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function ($scope, spUtil, $sce, $rootScope, $timeout) {
	spUtil.setSearchPage('kb');
	$scope.data.text = $sce.trustAsHtml($scope.data.text);
	$timeout(function() {
		$rootScope.$broadcast('sp.update.breadcrumbs', $scope.data.breadcrumbs);
	});
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;td {
	padding: .5em;
  	line-height: 1em;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;kb_article_modal&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;KB Article Modal&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	var t = data;
	data.kb_knowledge_page = $sp.getDisplayValue("kb_knowledge_page") || "kb_view";
	var articleGR = GlideRecord("kb_knowledge");
	articleGR.get($sp.getParameter('sys_id'));
	var recordIsValid = articleGR.isValidRecord();
	var canReadArticle = articleGR.canRead();
	t.isvalid = recordIsValid &amp;&amp; canReadArticle;

	if (canReadArticle) {
		articleGR.incrementViewCount(); // update sys_view_count immediately on kb_knowledge record
		var art = new GlideRecord("kb_use");
		if (art.isValid()) {
			art.article = articleGR.getUniqueValue();
			art.user = gs.getUserID();
			art.viewed = true;
			art.insert(); // kb_use records are aggregated to update sys_view_count nightly
			$sp.logStat('KB Article View', "kb_knowledge", articleGR.getUniqueValue(), articleGR.short_description);
		}

		t.category = articleGR.getValue('kb_category');
		t.sys_id = $sp.getParameter('sys_id');
		t.showAttachments = false;
		if (articleGR.display_attachments)
			t.showAttachments = true;
		t.categoryDisplay = articleGR.getDisplayValue('kb_category');
		t.short_description = articleGR.getValue('short_description');
		if (articleGR.getValue('article_type') == 'wiki')
			t.text = GlideWikiModel().render(articleGR.getValue('wiki'));
		else { 
			if(new GlidePluginManager().isActive('com.snc.knowledge_blocks'))
				t.text = new KBBlock().getArticleContent(articleGR);
			else
				t.text = articleGR.getValue('text');
		} 

		t.sys_view_count = articleGR.getDisplayValue('sys_view_count');
		t.author = articleGR.getDisplayValue('author');
		t.publishedUtc = articleGR.getValue('published');
		t.number = articleGR.getValue('number');
		if (showStarRating())
			t.rating = articleGR.getValue('rating');
		t.direct = false;
		if (articleGR.direct)
			t.direct = true;

		t.breadcrumbs = [{label: t.short_description, url: '#'}];
		if (!articleGR.kb_category.nil()) {
			var rec = articleGR.kb_category.getRefRecord();
			while (rec.getRecordClassName() == "kb_category") {
				t.breadcrumbs.unshift({label: rec.getDisplayValue(), url: '?id=kb_category&amp;kb_category=' + rec.getUniqueValue()});
				rec = rec.parent_id.getRefRecord();
			}
		}
		t.breadcrumbs.unshift({label: gs.getMessage("Knowledge Base"), url: '?id=' + t.kb_knowledge_page});
	}

	function showStarRating() {
		if (options.show_star_rating == "Yes")
			return true;

		if (options.show_star_rating == "No")
			return false;

		// check gating property for all rating options
		if (gs.getProperty("glide.knowman.show_rating_options", "true") != "true")
			return false;

		// does user have the right role?
		if (!gs.hasRole(gs.getProperty("glide.knowman.show_rating_options.roles")))
			return false;

		// check specific property for stars
		if (gs.getProperty("glide.knowman.show_star_rating", "true") != "true")
			return false;

		// does user have the right role?
		return gs.hasRole(gs.getProperty("glide.knowman.show_star_rating.roles"));
	}
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;jeremy.mandle&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-03-23 18:48:34&lt;/sys_created_on&gt;&lt;sys_id&gt;7290c576db1c3700314952b0cf961900&lt;/sys_id&gt;&lt;sys_mod_count&gt;2&lt;/sys_mod_count&gt;&lt;sys_name&gt;KB Article Modal&lt;/sys_name&gt;&lt;sys_package display_value="Walk-up Experience" source="sn_walkup"&gt;1da803b9b3b10300f686a72256a8dcbc&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Walk-up Experience"&gt;1da803b9b3b10300f686a72256a8dcbc&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_7290c576db1c3700314952b0cf961900&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;jeremy.mandle&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-03-23 18:52:25&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div ng-if="data.isvalid" class="panel panel-{{options.color}} b"&gt;

  &lt;div class="panel-heading"&gt;
    &lt;h2 class="panel-title h4"&gt;
      &lt;span class="pull-left"&gt;{{::data.short_description}}&lt;/span&gt;&amp;nbsp;
      &lt;span class="pull-right"&gt;{{::data.number}}&lt;/span&gt;
    &lt;/h2&gt;
  &lt;/div&gt;

  &lt;div class="panel-body m-b-lg wrapper-lg"&gt;

    &lt;div class="row m-b-lg b-b"&gt;
      &lt;span class="author pad-right" ng-if="data.author"&gt;
        &lt;glyph sn-char="user" class="pad-right" /&gt;
        ${Authored by {{::data.author}}}
      &lt;/span&gt;
      &lt;span ng-if="data.sys_view_count == 1" class="views pad-right"&gt;
        &lt;span class="pad-right"&gt;&amp;#8226;&lt;/span&gt; &lt;glyph sn-char="eye-open" class="pad-right" /&gt;
        ${{{::data.sys_view_count}} View}
      &lt;/span&gt;
      &lt;span ng-if="data.sys_view_count &gt; 1" class="views pad-right"&gt;
        &lt;span class="pad-right"&gt;&amp;#8226;&lt;/span&gt; &lt;glyph sn-char="eye-open" class="pad-right" /&gt;
        ${{{::data.sys_view_count}} Views}
      &lt;/span&gt;
      &lt;span class="published pad-right"&gt;
        &lt;span class="pad-right"&gt;&amp;#8226;&lt;/span&gt; &lt;glyph sn-char="calendar" class="pad-right" /&gt;
        &lt;sn-day-ago date="data.publishedUtc"/&gt;
      &lt;/span&gt;
      &lt;span ng-if="data.rating &gt; 0 &amp;&amp; !data.direct" title="{{::data.rating}} rating"&gt;
        &lt;span class="pad-right"&gt;&amp;#8226;&lt;/span&gt; &lt;uib-rating ng-model="::data.rating" max="5" readonly="true" aria-label="${Article rating} - ${Read Only}"/&gt;
      &lt;/span&gt;
    &lt;/div&gt;

    &lt;div ng-if="!data.direct" class="kb_article" ng-bind-html="::data.text" style="overflow-x:auto;"&gt;&lt;/div&gt;

    &lt;h4 ng-if="data.direct"&gt;
      ${View or download the attachments below}
    &lt;/h4&gt;
    &lt;div ng-if="::data.showAttachments || data.direct" class="b-t m-t"&gt;
      &lt;sp-attachment-manager table="'kb_knowledge'" sys-id="::data.sys_id" omit-edit="true"&gt;&lt;/sp-attachment-manager&gt;
    &lt;/div&gt;

  &lt;/div&gt;
&lt;/div&gt;

&lt;div ng-if="!data.isvalid"&gt;
  ${Article not found}
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload><payload_hash>-1170173682</payload_hash><remote_update_set display_value="20190322-dev25830-WALK-UP-mandle-gdpr-walk-up-experience">0cf9ac10dbec3f000a9572ffbf9619e1</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2019-03-28 09:00:24</sys_created_on><sys_id>08f9ac10dbec3f000a9572ffbf9619e3</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>169bf1ca7ac0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2019-03-28 09:00:24</sys_updated_on><table/><target_name>KB Article Modal</target_name><type>Widget</type><update_domain>global</update_domain><update_guid>0f71413aaf1c3700a72a74ee56d68059</update_guid><update_guid_history>0f71413aaf1c3700a72a74ee56d68059:-1170173682,a951cdf6531c37008e16b70c0ef588ec:1452605390,b690c5f6951c37004b85012b4c0e238e:673280898</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</application><category>customer</category><comments/><name>sp_ng_template_ee10aab6db107700314952b0cf9619e8</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_ng_template"&gt;&lt;sp_ng_template action="INSERT_OR_UPDATE"&gt;&lt;id&gt;modalTemplateType.html&lt;/id&gt;&lt;sp_widget display_value="Walk-up Home GDPR"&gt;76d09966db903700314952b0cf961928&lt;/sp_widget&gt;&lt;sys_class_name&gt;sp_ng_template&lt;/sys_class_name&gt;&lt;sys_created_by&gt;jeremy.mandle&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-03-24 01:46:15&lt;/sys_created_on&gt;&lt;sys_id&gt;ee10aab6db107700314952b0cf9619e8&lt;/sys_id&gt;&lt;sys_mod_count&gt;8&lt;/sys_mod_count&gt;&lt;sys_name&gt;modalTemplateType.html&lt;/sys_name&gt;&lt;sys_package display_value="Walk-up Experience" source="sn_walkup"&gt;1da803b9b3b10300f686a72256a8dcbc&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Walk-up Experience"&gt;1da803b9b3b10300f686a72256a8dcbc&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_ng_template_ee10aab6db107700314952b0cf9619e8&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;jeremy.mandle&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-03-27 11:57:41&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;!--new code--&gt;
&lt;div class="panel panel-default"&gt;
  &lt;div class="panel-heading"&gt;
    &lt;h4 class="panel-title"&gt;{{data.gdpr_article_short_description}}&lt;/h4&gt;
  &lt;/div&gt;
  &lt;div class="panel-body"&gt;
     &lt;p ng-bind-html="c.data.gdpr_text"&gt;&lt;/p&gt;
  &lt;/div&gt;
  &lt;div class="panel-footer text-right"&gt;
    &lt;button class="btn btn-primary" ng-click="c.closeModal()"&gt;${Accept}&lt;/button&gt;
    &lt;button class="btn btn-text" ng-click="c.closeModal()"&gt;${I do not accept}&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_ng_template&gt;&lt;/record_update&gt;</payload><payload_hash>1660939956</payload_hash><remote_update_set display_value="20190322-dev25830-WALK-UP-mandle-gdpr-walk-up-experience">0cf9ac10dbec3f000a9572ffbf9619e1</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2019-03-28 09:00:24</sys_created_on><sys_id>0cf9ac10dbec3f000a9572ffbf9619e2</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>169bf1ca7c00000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2019-03-28 09:00:24</sys_updated_on><table/><target_name>modalTemplateType.html</target_name><type>Angular ng-template</type><update_domain>global</update_domain><update_guid>0be8488849ac3b007a2fca2046f02b32</update_guid><update_guid_history>0be8488849ac3b007a2fca2046f02b32:1660939956,76188488e0ac3b00c441bb7f8a8bdc5d:1308456530,59174008d2ac3b0063ee2c24fd3f631d:-1745560005,2924227ac7107700a42284a459fc2d5f:-1816306513,5814ea7a6d107700d657807c04f59317:-1646620523,cef36a7ac210770065651231f3fa3fdc:600493994,b893ee3a8d107700acb3a4ca4cc5e6d4:1005352976,9403ae3a4b107700f879b5f5dfd8232a:261576767,5530eab67d107700112ca7bb5afc5fdb:839520582</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</application><category>customer</category><comments/><name>sp_row_4440d966db903700314952b0cf9619c8</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_row"><sp_row action="INSERT_OR_UPDATE"><class_name/><order>1</order><sp_column/><sp_container display_value="Copy of Walk-up Home (1) - Container 1">c8405566db903700314952b0cf96199a</sp_container><sys_class_name>sp_row</sys_class_name><sys_created_by>jeremy.mandle</sys_created_by><sys_created_on>2019-03-23 01:18:26</sys_created_on><sys_id>4440d966db903700314952b0cf9619c8</sys_id><sys_mod_count>0</sys_mod_count><sys_name>1</sys_name><sys_package display_value="Walk-up Experience" source="sn_walkup">1da803b9b3b10300f686a72256a8dcbc</sys_package><sys_policy/><sys_scope display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</sys_scope><sys_update_name>sp_row_4440d966db903700314952b0cf9619c8</sys_update_name><sys_updated_by>jeremy.mandle</sys_updated_by><sys_updated_on>2019-03-23 01:18:26</sys_updated_on></sp_row></record_update>]]></payload><payload_hash>-343320035</payload_hash><remote_update_set display_value="20190322-dev25830-WALK-UP-mandle-gdpr-walk-up-experience">0cf9ac10dbec3f000a9572ffbf9619e1</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2019-03-28 09:00:24</sys_created_on><sys_id>44f9ac10dbec3f000a9572ffbf9619e3</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>169bf1ca7640000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2019-03-28 09:00:24</sys_updated_on><table/><target_name>1</target_name><type>Row</type><update_domain>global</update_domain><update_guid>0840d966aa9037008359af2132e6ccc9</update_guid><update_guid_history>0840d966aa9037008359af2132e6ccc9:-343320035</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</application><category>customer</category><comments/><name>sp_instance_c440d966db903700314952b0cf9619cc</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_instance"><sp_instance action="INSERT_OR_UPDATE"><active>true</active><class_name/><color>default</color><css/><glyph/><id/><order>1</order><roles/><short_description/><size>md</size><sp_column display_value="1">4440d966db903700314952b0cf9619ca</sp_column><sp_widget display_value="Walk-up Home GDPR">76d09966db903700314952b0cf961928</sp_widget><sys_class_name>sp_instance</sys_class_name><sys_created_by>jeremy.mandle</sys_created_by><sys_created_on>2019-03-23 01:18:26</sys_created_on><sys_id>c440d966db903700314952b0cf9619cc</sys_id><sys_mod_count>1</sys_mod_count><sys_name/><sys_package display_value="Walk-up Experience" source="sn_walkup">1da803b9b3b10300f686a72256a8dcbc</sys_package><sys_policy/><sys_scope display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</sys_scope><sys_update_name>sp_instance_c440d966db903700314952b0cf9619cc</sys_update_name><sys_updated_by>jeremy.mandle</sys_updated_by><sys_updated_on>2019-03-23 01:21:22</sys_updated_on><title/><url/><widget_parameters/></sp_instance><sys_translated_text action="delete_multiple" query="documentkey=c440d966db903700314952b0cf9619cc"/></record_update>]]></payload><payload_hash>903452270</payload_hash><remote_update_set display_value="20190322-dev25830-WALK-UP-mandle-gdpr-walk-up-experience">0cf9ac10dbec3f000a9572ffbf9619e1</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2019-03-28 09:00:24</sys_created_on><sys_id>48f9ac10dbec3f000a9572ffbf9619e2</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>169bf1ca7a40000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2019-03-28 09:00:24</sys_updated_on><table/><target_name/><type>Instance</type><update_domain>global</update_domain><update_guid>8fe05d66fd903700ff5bbf7d17424fef</update_guid><update_guid_history>8fe05d66fd903700ff5bbf7d17424fef:903452270,cc40d96682903700d2607d4bd22e47cd:513714576</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</application><category>customer</category><comments/><name>sp_rel_widget_clone_bed09966db903700314952b0cf96192a</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_rel_widget_clone"><sp_rel_widget_clone action="INSERT_OR_UPDATE"><child display_value="Walk-up Home GDPR">76d09966db903700314952b0cf961928</child><cloned>2019-03-23 01:21:04</cloned><last_validated>2019-03-23 01:21:04</last_validated><parent display_value="Walk-up Home">a5903184232203004f93121727bf6578</parent><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;sp_widget&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, $location) {
	var c = this;
	var queueLink = '?id=walkup_queue_on_site';
	var checkInLink = '?id=walkup_check_in';
	var surveyLink = '?id=walkup_survey';

	c.queueLink = queueLink;
	c.checkInLink = checkInLink;
	c.surveyLink = surveyLink;
	c.isSelected = false;
	c.selectedName = '';
	c.previousSysId = '';
	c.recordPickerFields = {};

	// Reset the state of the home page prior to selecting a location
	c.cancelSelection = function() {
		c.selectedName = '';
		c.isSelected = false;
		clearRecordPickerFields();
	};

	initializePage();

	// Listen to changes made to the record picker
	$scope.$on("field.change", function(evt, parms) {
		var sysId = parms.newValue;
		var name = parms.displayValue;

		// When a new value is selcted from the location picker
		if (sysId &amp;&amp; c.previousSysId === sysId) {
			c.previousSysId = sysId;
			selectLocation(name);
		}
		// Clear the state of the home page
		else {
			c.cancelSelection();
		}

		setLink(sysId);
		setUrl(sysId);
	});

	/**
	 * Initialize the home page based on the url parameters. If there is a location_id and a 
	 * name in the parameter, then render the location picker with the corresponding id and name
	 */
	function initializePage() {
		var urlParams = $location.search();
		var sysId = urlParams.location_id;

		if (sysId)
			checkIfLocationExist(sysId);
		else
			clearRecordPickerFields();
	}

	/**
	 * Make a call to the server to check if the passed in sysId exists or is active.
	 *
	 * @param {stirng} sysId - The sys_id of the wu_location_queue table.
	 */
	function checkIfLocationExist(sysId) {
		c.server.get({
			action: c.data.actions.checkLocationExists,
			sysId: sysId
		}).then(function(result) {
			var locationName = result.data.doesLocationExist;

			if (locationName) {
				c.recordPickerFields = {
					displayValue: locationName,
					value: sysId,
					name: 'location'
				};

				c.previousSysId = sysId
				selectLocation(locationName);
				setLink(sysId);
			}
			else
				clearRecordPickerFields();

		});
	}

	// Set the state to show the clickable panels and the locaiton name when a location has been selected
	function selectLocation(name) {
		c.selectedName = name;
		c.isSelected = true;
	}

	// Set the record picker fields to a clean state.
	function clearRecordPickerFields() {
		c.recordPickerFields = {
			displayValue: name,
			value: '',
			name: 'location'
		};
	}

	// Set the url parameters
	function setUrl(id) {
		$location.search('location_id', id);
	}

	// Change the links to point to the walk-up pages with the corresponding id and name
	function setLink(id) {
		c.queueLink = queueLink + '&amp;location_id=' + id;
		c.checkInLink = checkInLink + '&amp;location_id=' + id;
		c.surveyLink = surveyLink + '&amp;location_id=' + id;
	}
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;$color_now: #E51B24;

.location-header {
  margin-top: 25px;
  margin-bottom: 25px;
  .location-picker {
    max-width: 340px;
  }

  .location-name {
    display-inline: inline-block;
    h2 {
      font-size: 1.5em;
      display: inline-block;
      margin-right: 8px;
    }
  }
}

p {
  color: #3A3F51;
  font-size: 1.1em;
  line-height: 1.6;
}

.color_box {
  display: block;
  position: relative;
  padding: 20px;
  border-radius: 4px;
  margin-bottom: 20px;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;

  &amp;amp;:hover {
    background-color: #E1E4E6;
  }
}

h2 {
  font-weight: 400;
  padding: 0;
  margin: 10px 0;
  line-height: 1.4;
  font-size: 22px;
}

.intro {
  margin: 50px 0 25px;
  border-bottom: 1px solid #ddd;
  padding-bottom: 25px;
}

.flex {
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  -webkit-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;

  &amp;amp; &amp;gt; div {
    -webkit-flex: 1;
    -ms-flex: 1;
    flex: 1;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    padding-right: 10px;

    &amp;amp;:last-child {
      padding-right: 0;
    }

    .text-primary {
      background: rgba($brand-primary, 0.15);
      color: darken($brand-primary, 10%);
    }

    .text-info {
      background: rgba($brand-info, 0.15);
      color: darken($brand-info, 20%);
    }

    .text-success {
      background: rgba($brand-success, 0.15);
      color: darken($brand-success, 14%);
    }

    .text-warning {
      background: rgba($brand-warning, 0.15);
      color: darken($brand-warning, 23%);
    }    
  }

  &amp;amp; &amp;gt; div:hover {

    p,
    .fa-circle,
    h2 {
      color: #fff;
    }

    .text-primary {
      background-color: $brand-primary;
      .fa-inverse {
        color: $brand-primary;
      }
    }

    .text-info {
      background-color: $brand-info;
      .fa-inverse {
        color: $brand-info;
      }
    }

    .text-success {
      background-color: $brand-success;
      .fa-inverse {
        color: $brand-success;
      }
    }

    .text-warning {
      background-color: $brand-warning;
      .fa-inverse {
        color: $brand-warning;
      }
    }

  }

}

}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;walkup-home&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;Walk-up Home&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function(){
	var actions = data.actions = {};
	actions.checkLocationExists = 'CHECK_EXISTS';
	var WalkUpUtil = new sn_walkup.ExtPointUtil().loadExtension("WalkUpUtil");
	if (input &amp;&amp; input.action === actions.checkLocationExists)
		data.doesLocationExist = WalkUpUtil.checkLocationExists(input.sysId);

})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;true&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;daniel.kong&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-11-15 17:02:43&lt;/sys_created_on&gt;&lt;sys_id&gt;a5903184232203004f93121727bf6578&lt;/sys_id&gt;&lt;sys_mod_count&gt;257&lt;/sys_mod_count&gt;&lt;sys_name&gt;Walk-up Home&lt;/sys_name&gt;&lt;sys_package display_value="Walk-up Experience" source="sn_walkup"&gt;1da803b9b3b10300f686a72256a8dcbc&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Walk-up Experience"&gt;1da803b9b3b10300f686a72256a8dcbc&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_a5903184232203004f93121727bf6578&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-06-19 01:16:34&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div class="intro"&gt;
  &lt;h1&gt;${Walk-up Experience}&lt;/h1&gt;
&lt;/div&gt;
&lt;div class="location-header"&gt;
  &lt;div ng-if="!c.isSelected" class="location-picker"&gt;
    &lt;sn-record-picker
                      id="location-dropdown"
                      table="'wu_location_queue'"
                      display-field="'name'"
                      placeholder="${Select a walk-up location}"
                      value-field="'sys_id'"
                      search-fields="'name'"
                      field="c.recordPickerFields"
                      page-size="100"
                      default-query="'active=true'"
                      aria-label="select-location"
                      &gt;
    &lt;/sn-record-picker&gt;
  &lt;/div&gt;
  &lt;div ng-if="c.isSelected" class="location-name"&gt;
    &lt;h2 class="location-name"&gt;
      {{c.selectedName}}
    &lt;/h2&gt;
    &lt;a class="cancel-location" ng-click="c.cancelSelection()" href=""&gt;${Change location}&lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div ng-if="c.isSelected" class="flex"&gt;
  &lt;div aria-labelledby="queueLabel" aria-describedby="queueInfo"&gt;
    &lt;a href="{{c.queueLink}}" class="color_box text-primary" role="link"&gt;
      &lt;span aria-label="Queue icon" class="fa fa-stack fa-2x"&gt; 
        &lt;i class="fa fa-circle fa-stack-2x"&gt;&lt;/i&gt; 
        &lt;i class="fa fa-list-alt fa-stack-1x fa-inverse"&gt;&lt;/i&gt; 
      &lt;/span&gt;
      &lt;h2 id='queueLabel'&gt;${Queue}&lt;/h2&gt;
      &lt;p id='queueInfo'&gt;${View the current list of requestors at the walk-up location.}&lt;/p&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  &lt;div aria-labelledby="checkInLabel" aria-describedby="checkInInfo"&gt;
    &lt;a href="{{c.checkInLink}}" class="color_box text-success" role="link"&gt;
      &lt;span aria-label="Check-in icon" class="fa fa-stack fa-2x"&gt; 
        &lt;i class="fa fa-circle fa-stack-2x"&gt;&lt;/i&gt; 
        &lt;i class="fa fa-check-square-o fa-stack-1x fa-inverse"&gt;&lt;/i&gt; 
      &lt;/span&gt;
      &lt;h2 id="checkInLabel"&gt;${Check-in}&lt;/h2&gt;
      &lt;p id="checkInInfo"&gt;${Allow requestors to check-in for service at the walk-up location.}&lt;/p&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  &lt;div aria-labelledby="surveyLabel" aria-describedby="surveyInfo"&gt;
    &lt;a href="{{c.surveyLink}}" class="color_box text-warning" role="link"&gt;
      &lt;span aria-label="Survey icon" class="fa fa-stack fa-2x"&gt; 
        &lt;i class="fa fa-circle fa-stack-2x"&gt;&lt;/i&gt; 
        &lt;i class="fa fa-paper-plane-o fa-stack-1x fa-inverse"&gt;&lt;/i&gt; 
      &lt;/span&gt;
      &lt;h2 id="surveyLabel"&gt;${Survey}&lt;/h2&gt;
      &lt;p id="surveyInfo"&gt;${Capture requestor sentiment of the experience by location.}&lt;/p&gt;
    &lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;</payload><sys_class_name>sp_rel_widget_clone</sys_class_name><sys_created_by>jeremy.mandle</sys_created_by><sys_created_on>2019-03-23 01:21:04</sys_created_on><sys_id>bed09966db903700314952b0cf96192a</sys_id><sys_mod_count>0</sys_mod_count><sys_name>76d09966db903700314952b0cf961928</sys_name><sys_package display_value="Walk-up Experience" source="sn_walkup">1da803b9b3b10300f686a72256a8dcbc</sys_package><sys_policy/><sys_scope display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</sys_scope><sys_update_name>sp_rel_widget_clone_bed09966db903700314952b0cf96192a</sys_update_name><sys_updated_by>jeremy.mandle</sys_updated_by><sys_updated_on>2019-03-23 01:21:04</sys_updated_on></sp_rel_widget_clone></record_update>]]></payload><payload_hash>-2128891999</payload_hash><remote_update_set display_value="20190322-dev25830-WALK-UP-mandle-gdpr-walk-up-experience">0cf9ac10dbec3f000a9572ffbf9619e1</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2019-03-28 09:00:24</sys_created_on><sys_id>80f9ac10dbec3f000a9572ffbf9619e3</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>169bf1ca79d0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2019-03-28 09:00:24</sys_updated_on><table/><target_name>76d09966db903700314952b0cf961928</target_name><type>Widget Clone</type><update_domain>global</update_domain><update_guid>b2d099664c903700d385e89979e81d2c</update_guid><update_guid_history>b2d099664c903700d385e89979e81d2c:-2128891999</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</application><category>customer</category><comments/><name>sp_container_c8405566db903700314952b0cf96199a</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_container"><sp_container action="INSERT_OR_UPDATE"><background_color/><background_image/><background_style>default</background_style><bootstrap_alt>false</bootstrap_alt><class_name/><container_class_name/><name>Walk-up Home - GDPR - Container 1</name><order>1</order><sp_page display_value="copy_of_walkup_home_1">cc405566db903700314952b0cf961997</sp_page><subheader>false</subheader><sys_class_name>sp_container</sys_class_name><sys_created_by>jeremy.mandle</sys_created_by><sys_created_on>2019-03-23 01:18:26</sys_created_on><sys_id>c8405566db903700314952b0cf96199a</sys_id><sys_mod_count>1</sys_mod_count><sys_name>Walk-up Home - GDPR - Container 1</sys_name><sys_package display_value="Walk-up Experience" source="sn_walkup">1da803b9b3b10300f686a72256a8dcbc</sys_package><sys_policy/><sys_scope display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</sys_scope><sys_update_name>sp_container_c8405566db903700314952b0cf96199a</sys_update_name><sys_updated_by>jeremy.mandle</sys_updated_by><sys_updated_on>2019-03-23 01:19:06</sys_updated_on><title/><width>container</width></sp_container></record_update>]]></payload><payload_hash>784755582</payload_hash><remote_update_set display_value="20190322-dev25830-WALK-UP-mandle-gdpr-walk-up-experience">0cf9ac10dbec3f000a9572ffbf9619e1</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2019-03-28 09:00:24</sys_created_on><sys_id>84f9ac10dbec3f000a9572ffbf9619e2</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>169bf1ca78f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2019-03-28 09:00:24</sys_updated_on><table/><target_name>Walk-up Home - GDPR - Container 1</target_name><type>Container</type><update_domain>global</update_domain><update_guid>0660556698903700d44f9c9f79f5cc5b</update_guid><update_guid_history>0660556698903700d44f9c9f79f5cc5b:784755582,c440d966c890370072c3941c403e32c7:-374541424</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</application><category>customer</category><comments/><name>sp_column_4440d966db903700314952b0cf9619ca</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_column"><sp_column action="INSERT_OR_UPDATE"><class_name/><order>1</order><size>12</size><size_lg/><size_sm/><size_xs/><sp_row display_value="1">4440d966db903700314952b0cf9619c8</sp_row><sys_class_name>sp_column</sys_class_name><sys_created_by>jeremy.mandle</sys_created_by><sys_created_on>2019-03-23 01:18:26</sys_created_on><sys_id>4440d966db903700314952b0cf9619ca</sys_id><sys_mod_count>0</sys_mod_count><sys_name>1</sys_name><sys_package display_value="Walk-up Experience" source="sn_walkup">1da803b9b3b10300f686a72256a8dcbc</sys_package><sys_policy/><sys_scope display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</sys_scope><sys_update_name>sp_column_4440d966db903700314952b0cf9619ca</sys_update_name><sys_updated_by>jeremy.mandle</sys_updated_by><sys_updated_on>2019-03-23 01:18:26</sys_updated_on></sp_column></record_update>]]></payload><payload_hash>1515656910</payload_hash><remote_update_set display_value="20190322-dev25830-WALK-UP-mandle-gdpr-walk-up-experience">0cf9ac10dbec3f000a9572ffbf9619e1</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2019-03-28 09:00:24</sys_created_on><sys_id>c0f9ac10dbec3f000a9572ffbf9619e2</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>169bf1ca7880000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2019-03-28 09:00:24</sys_updated_on><table/><target_name>1</target_name><type>Column</type><update_domain>global</update_domain><update_guid>0840d96605903700921804ad4b7b31cb</update_guid><update_guid_history>0840d96605903700921804ad4b7b31cb:1515656910</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</application><category>customer</category><comments/><name>sp_widget_76d09966db903700314952b0cf961928</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, $location, $uibModal, $sce, $window) {
	var c = this;
	var queueLink = '?id=walkup_queue_on_site';
	var checkInLink = '?id=walkup_check_in';
	var surveyLink = '?id=walkup_survey';

	c.queueLink = queueLink;
	c.checkInLink = checkInLink;
	c.surveyLink = surveyLink;
	c.isSelected = false;
	c.selectedName = '';
	c.previousSysId = '';
	c.recordPickerFields = {};

	// Reset the state of the home page prior to selecting a location
	c.cancelSelection = function() {
		c.selectedName = '';
		c.isSelected = false;
		clearRecordPickerFields();
	};

	initializePage();

	// Listen to changes made to the record picker
	$scope.$on("field.change", function(evt, parms) {
		var sysId = parms.newValue;
		var name = parms.displayValue;

		// When a new value is selcted from the location picker
		if (sysId &amp;&amp; c.previousSysId === sysId) {
			c.previousSysId = sysId;
			selectLocation(name);
		}
		// Clear the state of the home page
		else {
			c.cancelSelection();
		}

		setLink(sysId);
		setUrl(sysId);
	});

	/**
	 * Initialize the home page based on the url parameters. If there is a location_id and a 
	 * name in the parameter, then render the location picker with the corresponding id and name
	 */
	function initializePage() {
		var urlParams = $location.search();
		var sysId = urlParams.location_id;

		if (sysId)
			checkIfLocationExist(sysId);
		else
			clearRecordPickerFields();
	}

	/**
	 * Make a call to the server to check if the passed in sysId exists or is active.
	 *
	 * @param {stirng} sysId - The sys_id of the wu_location_queue table.
	 */
	function checkIfLocationExist(sysId) {
		c.server.get({
			action: c.data.actions.checkLocationExists,
			sysId: sysId
		}).then(function(result) {
			var locationName = result.data.doesLocationExist;

			if (locationName) {
				c.recordPickerFields = {
					displayValue: locationName,
					value: sysId,
					name: 'location'
				};

				c.previousSysId = sysId
				selectLocation(locationName);
				setLink(sysId);
			}
			else
				clearRecordPickerFields();

		});
	}

	// Set the state to show the clickable panels and the locaiton name when a location has been selected
	function selectLocation(name) {
		c.selectedName = name;
		c.isSelected = true;
	}

	// Set the record picker fields to a clean state.
	function clearRecordPickerFields() {
		c.recordPickerFields = {
			displayValue: name,
			value: '',
			name: 'location'
		};
	}

	// Set the url parameters
	function setUrl(id) {
		$location.search('location_id', id);
	}

	// Change the links to point to the walk-up pages with the corresponding id and name
	function setLink(id) {
		c.queueLink = queueLink + '&amp;location_id=' + id;
		c.checkInLink = checkInLink + '&amp;location_id=' + id;
		c.surveyLink = surveyLink + '&amp;location_id=' + id;
	}

	//ONLY NEW OR CHANGED CODE HERE
	//GDPR Modal and content
	$scope.data.text = $sce.trustAsHtml($scope.data.gdpr_text);

	c.openModalType = function() {
		c.modalInstance = $uibModal.open({
			templateUrl: 'modalTemplateType.html',
			scope: $scope,
			size: 'lg',
			backdrop: 'static'
		});
	}
	c.accept = function() {

	}
	c.closeModal = function() {
		c.modalInstance.close();
		$window.location.href = checkInLink;
	}
	//////////

}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;$color_now: #E51B24;

.location-header {
  margin-top: 25px;
  margin-bottom: 25px;
  .location-picker {
    max-width: 340px;
  }

  .location-name {
    display-inline: inline-block;
    h2 {
      font-size: 1.5em;
      display: inline-block;
      margin-right: 8px;
    }
  }
}

p {
  color: #3A3F51;
  font-size: 1.1em;
  line-height: 1.6;
}

.color_box {
  display: block;
  position: relative;
  padding: 20px;
  border-radius: 4px;
  margin-bottom: 20px;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;

  &amp;amp;:hover {
    background-color: #E1E4E6;
  }
}

h2 {
  font-weight: 400;
  padding: 0;
  margin: 10px 0;
  line-height: 1.4;
  font-size: 22px;
}

.intro {
  margin: 50px 0 25px;
  border-bottom: 1px solid #ddd;
  padding-bottom: 25px;
}

.flex {
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  -webkit-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;

  &amp;amp; &amp;gt; div {
    -webkit-flex: 1;
    -ms-flex: 1;
    flex: 1;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    padding-right: 10px;

    &amp;amp;:last-child {
      padding-right: 0;
    }

    .text-primary {
      background: rgba($brand-primary, 0.15);
      color: darken($brand-primary, 10%);
    }

    .text-info {
      background: rgba($brand-info, 0.15);
      color: darken($brand-info, 20%);
    }

    .text-success {
      background: rgba($brand-success, 0.15);
      color: darken($brand-success, 14%);
    }

    .text-warning {
      background: rgba($brand-warning, 0.15);
      color: darken($brand-warning, 23%);
    }    
  }

  &amp;amp; &amp;gt; div:hover {

    p,
    .fa-circle,
    h2 {
      color: #fff;
    }

    .text-primary {
      background-color: $brand-primary;
      .fa-inverse {
        color: $brand-primary;
      }
    }

    .text-info {
      background-color: $brand-info;
      .fa-inverse {
        color: $brand-info;
      }
    }

    .text-success {
      background-color: $brand-success;
      .fa-inverse {
        color: $brand-success;
      }
    }

    .text-warning {
      background-color: $brand-warning;
      .fa-inverse {
        color: $brand-warning;
      }
    }

  }

}

}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;true&lt;/has_preview&gt;&lt;id&gt;walkup-home-gdpr&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;Walk-up Home GDPR&lt;/name&gt;&lt;option_schema&gt;[{"displayValue":"Knowledge","name":"gdpr_article","section":"Data","default_value":"40f31d2adb903700314952b0cf961991","label":"GDPR Article","type":"reference","value":"kb_knowledge","ed":{"reference":"kb_knowledge"}}]&lt;/option_schema&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function(){

	var actions = data.actions = {};
	actions.checkLocationExists = 'CHECK_EXISTS';
	var WalkUpUtil = new sn_walkup.ExtPointUtil().loadExtension("WalkUpUtil");
	if (input &amp;&amp; input.action === actions.checkLocationExists)
		data.doesLocationExist = WalkUpUtil.checkLocationExists(input.sysId);

	//kb_knowledge article to use for GDPR
	data.gdpr_article = options.gdpr_article.toString(); 
	//data.user_language = gs.getUser().getLanguage().toString();
	var kb = new GlideRecord('kb_knowledge');
	kb.get('sys_id', data.gdpr_article);
	if(kb.next()) {
		data.gdpr_article_language = kb.language.toString();
	}

	//IF the user's preferred language equals the language of the
	//kb_knowledge article set as options.gdpr_article then use that one
	//ELSE query kb_knowledge for the language specific article
	//where the kb_knowledge.parent == options.gdpr_article
	if (data.gdpr_article_language == data.user_language) {
		data.gdpr_article_short_description = kb.short_description.toString();
		data.gdpr_text = kb.text.toString();
	} else {
		var kb2 = new GlideRecord('kb_knowledge');
		kb2.addQuery('parent', data.gdpr_article);
		kb2.addQuery('language', data.user_language);
		kb2.query();
		if(kb2.next()) {
			data.gdpr_article_short_description = kb2.short_description.toString();
			data.gdpr_text = kb2.text.toString();
		}
	}

})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;jeremy.mandle&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-03-23 01:21:04&lt;/sys_created_on&gt;&lt;sys_id&gt;76d09966db903700314952b0cf961928&lt;/sys_id&gt;&lt;sys_mod_count&gt;24&lt;/sys_mod_count&gt;&lt;sys_name&gt;Walk-up Home GDPR&lt;/sys_name&gt;&lt;sys_package display_value="Walk-up Experience" source="sn_walkup"&gt;1da803b9b3b10300f686a72256a8dcbc&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Walk-up Experience"&gt;1da803b9b3b10300f686a72256a8dcbc&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_76d09966db903700314952b0cf961928&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;jeremy.mandle&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-03-27 11:57:41&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div class="intro"&gt;
  &lt;h1&gt;${Walk-up Experience}&lt;/h1&gt;
&lt;/div&gt;
&lt;div class="location-header"&gt;
  &lt;div ng-if="!c.isSelected" class="location-picker"&gt;
    &lt;sn-record-picker
                      id="location-dropdown"
                      table="'wu_location_queue'"
                      display-field="'name'"
                      placeholder="${Select a walk-up location}"
                      value-field="'sys_id'"
                      search-fields="'name'"
                      field="c.recordPickerFields"
                      page-size="100"
                      default-query="'active=true'"
                      aria-label="select-location"
                      &gt;
    &lt;/sn-record-picker&gt;
  &lt;/div&gt;
  &lt;div ng-if="c.isSelected" class="location-name"&gt;
    &lt;h2 class="location-name"&gt;
      {{c.selectedName}}
    &lt;/h2&gt;
    &lt;a class="cancel-location" ng-click="c.cancelSelection()" href=""&gt;${Change location}&lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div ng-if="c.isSelected" class="flex"&gt;
  &lt;div aria-labelledby="queueLabel" aria-describedby="queueInfo"&gt;
    &lt;a href="{{c.queueLink}}" class="color_box text-primary" role="link"&gt;
      &lt;span aria-label="Queue icon" class="fa fa-stack fa-2x"&gt; 
        &lt;i class="fa fa-circle fa-stack-2x"&gt;&lt;/i&gt; 
        &lt;i class="fa fa-list-alt fa-stack-1x fa-inverse"&gt;&lt;/i&gt; 
      &lt;/span&gt;
      &lt;h2 id='queueLabel'&gt;${Queue}&lt;/h2&gt;
      &lt;p id='queueInfo'&gt;${View the current list of requestors at the walk-up location.}&lt;/p&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  &lt;div aria-labelledby="checkInLabel" aria-describedby="checkInInfo"&gt;
    &lt;a href="{{c.checkInLink}}" class="color_box text-success" role="link"&gt;
      &lt;span aria-label="Check-in icon" class="fa fa-stack fa-2x"&gt; 
        &lt;i class="fa fa-circle fa-stack-2x"&gt;&lt;/i&gt; 
        &lt;i class="fa fa-check-square-o fa-stack-1x fa-inverse"&gt;&lt;/i&gt; 
      &lt;/span&gt;
      &lt;h2 id="checkInLabel"&gt;${Check-in}&lt;/h2&gt;
      &lt;p id="checkInInfo"&gt;${Allow requestors to check-in for service at the walk-up location.}&lt;/p&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
  &lt;!--ONLY NEW OR CHANGED CODE HERE--&gt;
  &lt;div aria-labelledby="checkInLabel" aria-describedby="checkInInfo"&gt;
    &lt;a href="javascript:void(0)" ng-click="c.openModalType()" class="color_box text-success" role="link"&gt;
      &lt;span aria-label="Check-in icon" class="fa fa-stack fa-2x"&gt; 
        &lt;i class="fa fa-circle fa-stack-2x"&gt;&lt;/i&gt; 
        &lt;i class="fa fa-globe fa-stack-1x fa-inverse"&gt;&lt;/i&gt; 
      &lt;/span&gt;
      &lt;h2 id="checkInLabel"&gt;${Check-in GDPR}&lt;/h2&gt;
      &lt;p id="checkInInfo"&gt;${Allow requestors to check-in for service at the walk-up location.}&lt;/p&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  &lt;!--///////////////////////////////--&gt;
  
  &lt;div aria-labelledby="surveyLabel" aria-describedby="surveyInfo"&gt;
    &lt;a href="{{c.surveyLink}}" class="color_box text-warning" role="link"&gt;
      &lt;span aria-label="Survey icon" class="fa fa-stack fa-2x"&gt; 
        &lt;i class="fa fa-circle fa-stack-2x"&gt;&lt;/i&gt; 
        &lt;i class="fa fa-paper-plane-o fa-stack-1x fa-inverse"&gt;&lt;/i&gt; 
      &lt;/span&gt;
      &lt;h2 id="surveyLabel"&gt;${Survey}&lt;/h2&gt;
      &lt;p id="surveyInfo"&gt;${Capture requestor sentiment of the experience by location.}&lt;/p&gt;
    &lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;

]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload><payload_hash>-1272394930</payload_hash><remote_update_set display_value="20190322-dev25830-WALK-UP-mandle-gdpr-walk-up-experience">0cf9ac10dbec3f000a9572ffbf9619e1</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2019-03-28 09:00:24</sys_created_on><sys_id>c8f9ac10dbec3f000a9572ffbf9619e3</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>169bf1ca7b90000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2019-03-28 09:00:24</sys_updated_on><table/><target_name>Walk-up Home GDPR</target_name><type>Widget</type><update_domain>global</update_domain><update_guid>4be84888f0ac3b00ee2f33b0958b2130</update_guid><update_guid_history>4be84888f0ac3b00ee2f33b0958b2130:-1272394930,7c48844847ac3b003b9258f9798ddf80:-522378290,f618848833ac3b009e7b776370058a5b:725405236,90673aa3f1103b007efe49f74decae47:-824229923,2c29aefedb90770001cb0c0d0afef920:-2103072643,2ec3e67ab8107700b031e2411c9102d4:1989268058,55b3a67a9b107700b69c621ecd461585:639573753,fa73227af6107700a2137eb6bc9536db:1688420372,64736a3a3a107700fd5820808a006b3b:-1548205110,ba53a27aee1077005c8959be7dfadb62:1411589554,d003ae3a6810770013731e1579ea5c28:129317944,35a16ef6d5107700d86d3c775e8afaef:-1169187505,16716af6a3107700e32d3d8985eb5d00:-1117707543,b661e6f65c1077000d031706ac235682:1596547931,d621e6f6b010770091024823e9c81815:-959239812,41f02eb68d1077007cf2271930acd169:-731492120,46b0ea76331077002a380e61370e5f3a:1034142278,5c806676ce107700577c28519e60d5bc:-1641014955,49d611ea0590370019664e560a4f7618:-1250635119,1d75956a509037000323af03c5887572:1547375340,c255156ad69037003f8db49ea73201fc:520355582,d7b41d6a70903700d570578d0fdc6372:2011698573,5d94556aa8903700ef86bf978474999e:-1221088757,ecf1dd6619903700b35c393dfbbaa237:460064839,3ed09966df9037001409c1610a0b5929:-833387514</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</application><category>customer</category><comments/><name>sp_page_cc405566db903700314952b0cf961997</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_page"><sp_page action="INSERT_OR_UPDATE"><category>custom</category><css/><draft>false</draft><dynamic_title_structure/><id>walkup_home_gdpr</id><internal>false</internal><public>false</public><roles>sn_walkup.walkup_login</roles><short_description>Home page for the walk-up application which contains links to the queue, check in, and survey pages.</short_description><sys_class_name>sp_page</sys_class_name><sys_created_by>jeremy.mandle</sys_created_by><sys_created_on>2019-03-23 01:18:26</sys_created_on><sys_id>cc405566db903700314952b0cf961997</sys_id><sys_mod_count>1</sys_mod_count><sys_name>walkup_home_gdpr</sys_name><sys_package display_value="Walk-up Experience" source="sn_walkup">1da803b9b3b10300f686a72256a8dcbc</sys_package><sys_policy/><sys_scope display_value="Walk-up Experience">1da803b9b3b10300f686a72256a8dcbc</sys_scope><sys_update_name>sp_page_cc405566db903700314952b0cf961997</sys_update_name><sys_updated_by>jeremy.mandle</sys_updated_by><sys_updated_on>2019-03-23 01:19:06</sys_updated_on><title>Walk-up Home - GDPR</title></sp_page><sys_translated_text action="delete_multiple" query="documentkey=cc405566db903700314952b0cf961997"/></record_update>]]></payload><payload_hash>-1517122493</payload_hash><remote_update_set display_value="20190322-dev25830-WALK-UP-mandle-gdpr-walk-up-experience">0cf9ac10dbec3f000a9572ffbf9619e1</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2019-03-28 09:00:24</sys_created_on><sys_id>ccf9ac10dbec3f000a9572ffbf9619e2</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>169bf1ca7960000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2019-03-28 09:00:24</sys_updated_on><table/><target_name>walkup_home_gdpr</target_name><type>Page</type><update_domain>global</update_domain><update_guid>06605d663b903700caa7b2da12afb2eb</update_guid><update_guid_history>06605d663b903700caa7b2da12afb2eb:-1517122493,8c405566839037000071fa0616aa2e99:-1631166097</update_guid_history><update_set/><view/></sys_update_xml></unload>